let fs=require("fs");
let wavdecoder=require("wav-decoder");
let pico=require(__dirname+"/pico.js");

wavdecoder.decode(fs.readFileSync("multiple_keywords.wav")).then((wav)=>{
		let piko=new pico({
			grapefruit:fs.readFileSync(__dirname+"/prekeywords/grapefruit_wasm.ppn"),
			bumblebee:fs.readFileSync(__dirname+"/prekeywords/bumblebee_wasm.ppn")
		},wav.sampleRate,(word)=>{
			console.log(word);
		})

		piko.init().then(()=>{
				
				for(let i=0;i<wav.channelData[0].length;i+=1024)
				piko.feed(wav.channelData[0].slice(i,i+1024));
			
		});

});
